<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Simulador de AFDs (Definindo Inicial e Finais)</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input, button, select { margin: 5px; }
    </style>
</head>
<body>

<h1>Simulador de AFDs Personalizados</h1>

<!-- Entrada da string -->
<label for="inputString">Digite a string:</label>
<input type="text" id="inputString" placeholder="Ex: 0010">
<br>

<!-- Escolher o AFD -->
<label for="afdSelect">Escolha o AFD base:</label>
<select id="afdSelect">
    <option value="1">Termina com 0</option>
    <option value="2">Número par de 0s</option>
    <option value="3">Exatamente dois 1s</option>
    <option value="4">Começa e termina com mesmo símbolo</option>
    <option value="5">A quinta AFD </option>
</select>
<br>

<!-- Definir estado inicial -->
<label for="startState">Estado Inicial:</label>
<input type="text" id="startState" placeholder="Ex: q0">
<br>

<!-- Definir estados finais -->
<label for="acceptStates">Estados de Aceitação (separados por vírgula):</label>
<input type="text" id="acceptStates" placeholder="Ex: q1,q2">
<br>

<button onclick="testDFA()">Testar</button>

<h2 id="result"></h2>

<script>
// AFDs pré-definidos
const dfas = {
    1: {
        transitions: {
            "q0,0": "q1",
            "q0,1": "q0",
            "q1,0": "q1",
            "q1,1": "q0"
        }
    },
    2: {
        transitions: {
            "q0,0": "q1",
            "q0,1": "q0",
            "q1,0": "q0",
            "q1,1": "q1"
        }
    },
    3: {
        transitions: {
            "q0,0": "q0",
            "q0,1": "q1",
            "q1,0": "q1",
            "q1,1": "q2",
            "q2,0": "q2",
            "q2,1": "q3",
            "q3,0": "q3",
            "q3,1": "q3"
        }
    },
    4: {
        transitions: {
            "q0,0": "q1",
            "q0,1": "q2",
            "q1,0": "q1",
            "q1,1": "q1",
            "q2,0": "q2",
            "q2,1": "q2"
        }
    },
    5: {
        transitions: {
            "q0,0": "q1",
            "q0,1": "q3",
            "q1,0": "q1",
            "q1,1": "q2",
            "q2,0": "q1",
            "q2,1": "q2",
            "q3,0": "q4",
            "q3,1": "q3",
            "q4,0": "q4",
            "q4,1": "q3"
        }
    }
};

// Função para simular
function simulateDFA(transitions, startState, acceptStates, inputStr) {
    let state = startState;
    for (let symbol of inputStr) {
        const transitionKey = `${state},${symbol}`;
        if (transitions[transitionKey]) {
            state = transitions[transitionKey];
        } else {
            return false;
        }
    }
    return acceptStates.includes(state);
}

// Função chamada no botão
function testDFA() {
    const inputStr = document.getElementById("inputString").value;
    const selectedDFA = document.getElementById("afdSelect").value;
    const startState = document.getElementById("startState").value.trim();
    const acceptStatesInput = document.getElementById("acceptStates").value.trim();
    const acceptStates = acceptStatesInput.split(",").map(s => s.trim());

    const dfa = dfas[selectedDFA];

    if (!startState || acceptStates.length === 0) {
        document.getElementById("result").innerText = "❗ Defina o estado inicial e os estados finais.";
        return;
    }

    const isAccepted = simulateDFA(dfa.transitions, startState, acceptStates, inputStr);
    document.getElementById("result").innerText = isAccepted ? "✅ Aceito!" : "❌ Rejeitado!";
}
</script>

</body>
</html>
